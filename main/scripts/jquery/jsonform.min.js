/* jsonform.js */
/*
 Copyright Milfont Consulting.
 Dual licensed under the MIT or GPL Version 2 licenses.
 http://jquery.org/license
*/
(function(k){k.fn.extend({version:"1.2.2",getJSON:function(c){var e={},a=this,g;typeof c==="object"&&(g=c,c=g.byId?g.byId:false);a.find("input,textarea,select").each(function(f,b){if(b.type!="radio"||b.checked){var j=c?k.trim(b.id):k.trim(b.name);j!==""&&a.merge(e,a.buildJson(j,b.value,g))}});return e},populate:function(c,e){var a=this;(function f(b,j){for(var i in b)if(b[i]||b[i]===0){var h=b[i];if(typeof h=="object"){var d=!j?i:j+"\\."+i;if(k.isArray(h))for(var c in h)h[c]&&(parent_arr=d+"\\["+
c+"\\]",f(h[c],parent_arr));else f(h,d)}else{var d=j?j+"\\."+i:i,l="[name='"+d+"']";e&&(l="#"+d);a.find(l).val(h)}}})(c);return this},buildJson:function(c,e,a){var g=a&&a.prefix?a.prefix:"",f=a&&a.suffix?a.suffix:"",b=function(a,b){var h;if(a.match(/\[(\d+)\]/)){h=a.match(/\[(\d+)\]/);var d=[];d[h[1]]=b;return d}else return b};return function i(a,d,c){var d=d.split("."),e=d.shift();a[g+e.replace(/\[(\d+)\]/,"")+f]=d.length>0?b(e,i({},d.join("."),c)):b(e,c);return a}({},c,e)},merge:function e(a,g){for(var f in g)typeof g[f]===
"object"&&typeof a[f]!=="undefined"?e(a[f],g[f]):a[f]=g[f];return a}})})(jQuery);